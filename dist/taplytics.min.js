!function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[s]={exports:{}};t[s][0].call(l.exports,function(e){var i=t[s][1][e];return n(i?i:e)},l,l.exports,e,t,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,i){i.request=e("./api/base"),i.users=e("./api/users"),i.events=e("./api/events"),i.config=e("./api/config"),i.init=function(e){return!!(e&&e._in&&e._in.token)&&this.request.setPublicToken(e._in.token)}},{"./api/base":2,"./api/config":3,"./api/events":4,"./api/users":5}],2:[function(e,t,i){function r(e,t,i){var r=f(t),n=l(e);g.log("GET request: "+n,r,g.LOUD),h.get(n).query(r.query).end(a(n,i))}function n(e,t,i,r){var n=f(t,i),o=l(e);g.log("POST request: "+o,n,g.LOUD),h.post(o).query(n.query).set("Content-Type","application/base64+json").send(n.payload).end(a(o,r))}function o(e,t,i,r){var n=f(t,i),o=l(e);g.log("DELETE request: "+o,n,g.LOUD),h.del(o).query(n.query).set("Content-Type","application/base64+json").send(n.payload).end(a(o,r))}function s(e){this.publicToken=e}function a(e,t){return function(i,r){i&&g.error("Error: "+e,i,g.DEBUG),t&&"function"==typeof t&&t(i,r),c()}}function u(e){return function(){m.enqueue({requestFunction:e,args:arguments}),b||c()}}function c(){if(!m.isEmpty()){b=!0;var e=m.dequeue();return g.log("Processing request",e,g.DEBUG),e&&e.requestFunction&&e.requestFunction.apply(i,e.args)}b=!1}function l(e,t){return d.obj().baseAPI+(e||"")+p(t)}function p(e){return e?"?"+y.stringify(e):""}function f(e,t){var r={},n={};return r=e&&"function"==typeof e?e():e,n=t&&"function"==typeof t?t():t,r.r_v="1",window.btoa&&JSON.stringify?n=window.btoa(JSON.stringify(n)):r.r_v="0",i.publicToken&&(r.public_token=i.publicToken),{query:r,payload:n}}var h=e("superagent"),d=e("../../config"),g=e("../lib/logger"),v=e("../lib/queue"),y=e("qs"),m=new v,b=!1,_=u(n),w=u(r),k=u(o);i.publicToken=null,i.setPublicToken=s,i.get=w,i.post=_,i.del=k},{"../../config":27,"../lib/logger":20,"../lib/queue":22,qs:32,superagent:38}],3:[function(e,t,i){var r=e("./base"),n=e("../lib/logger"),o=e("../lib/session");i.get=function(e){var t=o.getSessionAttributes();t.auid=o.getAppUserID(),t.prms&&(t.prms=JSON.stringify(t.prms)),o.test_experiments&&(t.uev=JSON.stringify(o.test_experiments)),n.log("config_get",t,n.DEBUG),r.get("config",t,function(t,i){if(t)n.error("Failed to get config",t,n.DEBUG),o.saveSessionConfig(null);else{var r=i.body;o.saveSessionConfig(r),r?n.log("config.get: successfully got session config data",i,n.DEBUG):n.error("No config data in response",null,n.DEBUG)}return e&&e(t,i)})}},{"../lib/logger":20,"../lib/session":23,"./base":2}],4:[function(e,t,i){function r(e){return{type:e,date:(new Date).toISOString(),tvKey:l.attr("title"),tvCl:l.attr("href"),prod:a.isProduction()?1:0,data:{_tl_view:l.toObject()}}}function n(){if(u.log("events.flushQueue: tick.",d,u.LOUD),d.isEmpty()||!f.hasLoadedData)return i.scheduleTick();var e=d.flush(),t=f.getSessionID();t||s.post({},"Taplytics::events.flushQueue: failed to create sessions. Events will fail to process."),this.post(e,function(t,r){t&&d.enqueueAll(e),i.scheduleTick()})}var o=e("./base"),s=e("./users"),a=e("../../config"),u=e("../lib/logger"),c=e("../lib/merge"),l=e("../lib/location"),p=e("../lib/queue"),f=e("../lib/session"),h="events",d=new p,g={active:"appActive",goal:"goalAchieved",pageView:"viewAppeared",pageClose:"viewDisappeared",timeOnPage:"viewTimeOnPage"};i.types=g,i.timeOnPage=function(e,t,i,n,o,s){var a=r(g.timeOnPage);if(s&&s.getTime){var u=(new Date).getTime(),l=s.getTime(),p=(u-l)/1e3;a.val=p}return a.vKey=t,a.tKey=e,a.tvKey=n,a.tvCl=i,o&&(a.data=c(a.data||{},{_tl_view:o})),d.enqueue(a)},i.scheduleTick=function(){var e=n.bind(this);setTimeout(e,a.obj().eventsFlushQueueTimeout)},i.pageClose=function(e,t,i,n,o){var s=r(g.pageClose);return s.val=(new Date).toISOString(),s.vKey=t,s.tKey=e,s.tvKey=n,s.tvCl=i,o&&(s.data=c(s.data||{},{_tl_view:o})),d.enqueue(s)},i.pageView=function(e,t,i){var n=r(g.pageView);return i&&(n.data=c(n.data,i)),n.val=(new Date).toISOString(),n.vKey=t,n.tKey=e,d.enqueue(n)},i.goalAchieved=function(e,t,i){var n=r(g.goal);return i&&(n.data=c(n.data,i)),t&&(n.val=t),n.gn=e,d.enqueue(n)},i.appActive=function(){var e=r(g.active);return d.enqueue(e)},i.post=function(e,t){var i={},r=function(t){var i={};i.sid=f.getSessionID();var r={session:i,events:e};return r};o.post(h,i,r,function(e,i){return e?u.error("Taplytics::events.post: failed to log events",e,u.LOG):u.log("Taplytics::events.post: succesfully logged events.",i,u.DEBUG),t&&t(e,i)})}},{"../../config":27,"../lib/location":19,"../lib/logger":20,"../lib/merge":21,"../lib/queue":22,"../lib/session":23,"./base":2,"./users":5}],5:[function(e,t,i){var r=e("./base"),n=(e("../lib/source"),e("../lib/logger")),o=e("../lib/session");i.users_path="users",i.del=function(e){o.sessionConfigPromise(function(){var t=o.getAppUserID();if(t){var s={};s.sid=o.getSessionID(),s.ad=o.getSessionUUID();var a={},u={session:s};n.log("users_del",u,n.DEBUG),r.del(i.users_path+"/"+t,a,u,function(t,i){return t?n.error("Couldn't properly rest user.",i,n.DEBUG):n.log("Successfully reset the user.",i,n.DEBUG),e&&e(t,i)})}})},i.post=function(e,t,s){o.sessionConfigPromise(function(){var a=e,u=o.getSessionAttributes();a||(a={}),a.auid=o.getAppUserID();var c={session:u,app_user:a};n.log("users_post",c,n.DEBUG),r.post(i.users_path,{},c,function(e,i){if(e)n.error(t,e,n.USER);else{var r=i.body;r?(n.log("Users.post: successfully created/updated user.",i,n.DEBUG),o.setAppUserID(r.app_user_id),o.setSessionID(r.session_id),o.tick()):n.error(t,null,n.USER)}return s&&s(e,i)})})}},{"../lib/logger":20,"../lib/session":23,"../lib/source":24,"./base":2}],6:[function(e,t,i){var r=e("./base"),n=e("../lib/logger");e("../lib/session");i.post=function(e,t){if(!e)return n.error("No new variable to post to server",null,n.DEBUG);var i={name:e.name,createdAt:new Date,variableType:e.defaultType,defaultVal:e.stringifyValue?e.stringifyValue(e.defaultValue):e.defaultValue};n.log("variable_post",i,n.DEBUG),r.post("variable",{},i,function(e,i){if(e)n.error("Failed to post variable",e,n.DEBUG);else{var r=i.body;r&&r.name&&n.log("Users.post: successfully created new variable.",r,n.DEBUG)}return t&&t(e)})}},{"../lib/logger":20,"../lib/session":23,"./base":2}],7:[function(e,t,i){var r={};r.api=e("./api"),r.init=e("./functions/init"),r.isReady=e("./functions/isReady"),r.identify=e("./functions/identify"),r.track=e("./functions/track"),r.page=e("./functions/page"),r.reset=e("./functions/reset"),r.propertiesLoaded=e("./functions/propertiesLoaded"),r.runningExperiments=e("./functions/runningExperiments"),r.variable=e("./functions/variable"),r.codeBlock=e("./functions/codeBlock"),t.exports=r},{"./api":1,"./functions/codeBlock":8,"./functions/identify":9,"./functions/init":10,"./functions/isReady":11,"./functions/page":12,"./functions/propertiesLoaded":13,"./functions/reset":14,"./functions/runningExperiments":15,"./functions/track":16,"./functions/variable":17}],8:[function(e,t,i){var r=e("../lib/logger"),n=e("../lib/session"),o=e("../api/variable");t.exports=function(e,t){return e?void n.sessionConfigPromise(function(){var i=n.config;if(i){var s=i.dynamicVars?i.dynamicVars[e]:null;if(s){if("Code Block"!==s.variableType)return r.error("Taplytics code block "+e+" default type does not match server: "+s.variableType,null,r.LOG);t&&s.value&&t()}else r.log("New Taplytics Code Block: "+e,null,r.DEBUG),o.post({name:e,defaultType:"Code Block",defaultValue:!1})}}):r.error("No name to run code block",null,r.USER)}},{"../api/variable":6,"../lib/logger":20,"../lib/session":23}],9:[function(e,t,i){function r(e){return!(!e||e&&"object"!=typeof e)}function n(e){var t={customData:{}},i=Object.keys(e),r=0;for(r=0;r<i.length;r++){var n=i[r],s=e[n],a=o(n);a&&a.isTopLevel?t[a.acceptedKey]=s:t.customData[n]=s}return t}function o(e){var t={user_id:["user_id","id","userID","userId","customer_id","member_id"],email:["email","email_address"],name:["name"],firstName:["first_name","firstName"],lastName:["last_name","lastName"],avatarUrl:["avatar","avatarUrl","avatar_url"],age:["age"],gender:["gender"]},i=Object.keys(t),r=0,n=0;for(r=0;r<i.length;r++){var o=i[r],s=t[o];if(s)for(n=0;n<s.length;n++){var a=s[n];if(a&&e&&a==e)return{isTopLevel:!0,acceptedKey:a}}}return{isTopLevel:!1}}var s=e("../lib/logger");t.exports=function(e){if(!this.isReady())return s.error("Taplytics::identify: you have to call Taplytics.init first.",null,s.USER),this;if(!r(e))return s.error("Taplytics::identify: you have to pass in an object with user attributes.",null,s.USER),this;var t=n(e);return this.api.users.post(t,"Taplytics::identify: failed to save the user attributes properly."),this}},{"../lib/logger":20}],10:[function(e,t,i){function r(e){return!(!e||"string"!=typeof e)&&!!e.length}var n=e("../lib/logger"),o=(e("../lib/location"),e("../lib/session")),s=e("../lib/cookies"),a=!0;t.exports=function(e,t){return r(e)?(this.env="production",t&&(t.log_level&&n.setPriorityLevel(t.log_level),t.auto_page_view===!1&&(a=!1),t.env&&(this.env=t.env),t.test_experiments&&(o.test_experiments=t.test_experiments)),this._in={},this._in.token=e,this._in.logger=n,this._in.cookies=s,this.api.init(this),o.start(),this.api.config.get(),a&&this.page&&this.page(),this.api.events.scheduleTick(),this.api.events.appActive(),this):void n.error("An SDK token is required.",null,n.USER)}},{"../lib/cookies":18,"../lib/location":19,"../lib/logger":20,"../lib/session":23}],11:[function(e,t,i){e("../api");t.exports=function(){return!(!this._in||!this._in.token)}},{"../api":1}],12:[function(e,t,i){function r(){var e=u.get(c.previous_page_view_date);return e&&(e=new Date(e)),{category:u.get(c.previous_page_category),name:u.get(c.previous_page_name),href:u.get(c.previous_page_href),title:u.get(c.previous_page_title),location:u.get(c.previous_page_location,JSON&&JSON.parse),view_date:e}}function n(e,t){u.set(c.previous_page_category,e),u.set(c.previous_page_name,t),u.set(c.previous_page_href,a.attr("href")),u.set(c.previous_page_title,a.attr("title")),u.set(c.previous_page_location,a.toObject(),JSON&&JSON.stringify),u.set(c.previous_page_view_date,(new Date).toISOString())}function o(){u.unset(c.previous_page_category),u.unset(c.previous_page_name),u.unset(c.previous_page_href),u.unset(c.previous_page_title),u.unset(c.previous_page_location),u.unset(c.previous_page_view_date)}var s=e("../lib/logger"),a=e("../lib/location"),u=e("../lib/session"),c={previous_page_href:"p_p_l_h",previous_page_title:"p_p_l_t",previous_page_location:"p_p_l",previous_page_name:"p_p_n",previous_page_category:"p_p_c",previous_page_view_date:"p_p_v_d"};t.exports=function(e,t,i){if(!this.isReady())return s.error("track: you have to call Taplytics.init first.",null,s.USER),this;var a=e,l=t,p=i;if("object"!=typeof t||i?e&&!t&&(a=void 0,l=e):(a=void 0,l=e,p=t),u.tick(),u.get(c.previous_page_href)){var f=r();this.api.events.pageClose(f.category,f.name,f.href,f.title,f.location),this.api.events.timeOnPage(f.category,f.name,f.href,f.title,f.location,f.view_date),o()}return this.api.events.pageView(a,l,p),n(a,l),this}},{"../lib/location":19,"../lib/logger":20,"../lib/session":23}],13:[function(e,t,i){var r=e("../lib/session");t.exports=function(e){r.sessionConfigPromise(e)}},{"../lib/session":23}],14:[function(e,t,i){var r=e("../lib/logger"),n=e("../lib/session");t.exports=function(){return this.isReady()?(n.tick(),this.api.users.del(),n.resetSession(),this.api.config.get(),this):(r.error("Taplytics::reset: you have to call Taplytics.init first.",null,r.USER),!1)}},{"../lib/logger":20,"../lib/session":23}],15:[function(e,t,i){var r=e("../lib/session");t.exports=function(e){r.sessionConfigPromise(function(){var t=r.config&&r.config.expVarsNames?r.config.expVarsNames:{};return e&&e(t)})}},{"../lib/session":23}],16:[function(e,t,i){function r(e){var t="[object Number]",i=Object.prototype.toString;return"number"==typeof e||n(e)&&i.call(e)==t}function n(e){return!!e&&"object"==typeof e}var o=e("../lib/logger"),s=e("../lib/session");t.exports=function(e,t,i){if(!this.isReady())return o.error("track: you have to call Taplytics.init first.",null,o.USER),!1;if(!e)return o.error("track: you have to specify an event name.",null,o.USER),!1;var a=t,u=i;return n(t)&&!i&&(a=void 0,u=t),a&&!r(a)?(o.error("track: if you're passing a value, it has to be a number.",null,o.USER),!1):(s.tick(),this.api.events.goalAchieved(e,a,u),this)}},{"../lib/logger":20,"../lib/session":23}],17:[function(e,t,i){var r=(e("../lib/session"),e("../tlVariable/tlVariable"));t.exports=function(e,t,i){var n=new r(e,t,i);return n&&n.init?n:null}},{"../lib/session":23,"../tlVariable/tlVariable":26}],18:[function(e,t,i){function r(){var e=new a;if(document.cookie&&document.cookie.length)for(var t,i=document.cookie.split(";"),r=0;r<i.length;r++){for(t=i[r];" "==t.charAt(0);)t=t.substring(1);e.setCookies(t)}return e}function n(e,t,i){var r=e;t&&(r+="="+t);var n=new u(r);return i&&(n.expiration_date=i),n}function o(){var e=!0;do{var t="gCStest="+Math.floor(1e8*Math.random());if(document.cookie=e?t+";expires=Tue, 01-Jan-2030 00:00:00 GMT":t,document.cookie.indexOf(t)!==-1)return document.cookie=t+";expires=Sat, 01-Jan-2000 00:00:00 GMT",e}while(!(e=!e));return null}var s=e("./logger"),a=e("cookiejar").CookieJar,u=e("cookiejar").Cookie,c=e("cookiejar").CookieAccessInfo,l=e("lscache"),p=new c;i.get=function(e){if(o()){var t=r(),i=t.getCookie(e,p);if(!i)return;return i.value}var n=l.get(e);return s.log("Got local storage key: "+e+" with value: "+n,s.DEBUG),n},i.set=function(e,t,i){if(e)if(o()){t=t||"",i=i||{};var r=n(e,t,i.expires),a=r.toString();document.cookie=a,s.log("Setting cookies to:",a,s.DEBUG)}else{var u=null;i&&i.expires&&(u=30),l.set(e,t,u),s.log("Setting local storage key: "+e+" to value: "+t,s.DEBUG)}},i.expire=function(e){o()?i.set(e,"-",{expires:new Date}):(s.log("Deleting local storage key: "+e,s.DEBUG),l.remove(e))}},{"./logger":20,cookiejar:30,lscache:31}],19:[function(e,t,i){function r(e){return n[e]?n[e]:"title"===e?document.title:document.location?document.location[e]:null}var n=(e("../lib/swizzle"),e("./logger"),{});i.toObject=function(){return{href:r("href"),hash:r("hash"),search:r("search"),host:r("host"),protocol:r("protocol"),pathname:r("pathname"),title:r("title")}},i.attr=function(e){return r(e)},i.listen=function(e){}},{"../lib/swizzle":25,"./logger":20}],20:[function(e,t,i){function r(e){return n>=e}var n=0;i.LOUD=3,i.DEBUG=2,i.LOG=1,i.USER=0,i.setPriorityLevel=function(e){n=e},i.log=function(e,t,i){(void 0===i||r(i))&&(console.log("[Taplytics]",e),t&&console.dir(t))},i.error=function(e,t,i){(void 0===i||r(i))&&(console.error("[Taplytics]",e),t&&console.dir(t))}},{}],21:[function(e,t,i){t.exports=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}},{}],22:[function(e,t,i){function r(){var e=[];this.length=function(){return e.length},this.isEmpty=function(){return 0===e.length},this.enqueue=function(t){e.push(t)},this.enqueueAll=function(e){if(!e||e&&"array"!=typeof e)return 0;var t=0;for(t=0;t<e.length;t++){var i=e[t];this.enqueue(i)}return e.length},this.dequeue=function(){if(0!=e.length){var t=e.shift();return t}},this.flush=function(){var t=e.slice();return e=[],t},this.peek=function(){return e.length>0?e[0]:void 0}}t.exports=r},{}],23:[function(e,t,i){function r(e,t,i){var r=new Date(e);switch(t.toLowerCase()){case"year":r.setFullYear(r.getFullYear()+i);break;case"quarter":r.setMonth(r.getMonth()+3*i);break;case"month":r.setMonth(r.getMonth()+i);break;case"week":r.setDate(r.getDate()+7*i);break;case"day":r.setDate(r.getDate()+i);break;case"hour":r.setTime(r.getTime()+36e5*i);break;case"minute":r.setTime(r.getTime()+6e4*i);break;case"second":r.setTime(r.getTime()+1e3*i);break;default:r=void 0}return r}var n=e("./cookies"),o=e("uuid"),s=e("./logger"),a=e("../../config"),u=e("../lib/source"),c=e("../lib/location"),l={cookieSessionID:"_tl_csid",sessionUUID:"_tl_suuid",sessionID:"_tl_sid",appUserID:"_tl_auid",sessionOptions:function(e,t){return e&&t?"tl_sopts_"+e+"_"+t:null}};i.data={},i.hasLoadedData=!1,i.start=function(){return i.updateCookieSession().setSessionUUID(),i},i.get=function(e,t){if(e){i.tick();var r=i.getCookieSessionID(),o=l.sessionOptions(r,e);if(o){if(!(t&&JSON&&JSON.parse))return n.get(o);var a=n.get(o);try{return JSON.parse(a)}catch(u){return s.error("Session.get("+e+") failed to parse JSON.",u,s.DEBUG),a}}}},i.tick=function(){return i.updateCookieSession(),i},i.set=function(e,t,o){if(!e||void 0===t||0===(""+t).length)return!1;i.tick();var s=i.getCookieSessionID(),a=l.sessionOptions(s,e),u=r(new Date,"minute",30),c=t;return!!a&&(o&&JSON&&JSON.stringify&&(c=JSON.stringify(t)),n.set(a,c,{expires:u}),!0)},i.unset=function(e){if(!e)return!1;i.tick();var t=i.getCookieSessionID(),r=l.sessionOptions(t,e);n.expire(r)},i.updateCookieSession=function(){var e=i.getCookieSessionID();e||(e=o.v4(),i.deleteSessionID());var t=r(new Date,"minute",30);return n.set(l.cookieSessionID,e,{expires:t}),s.log("Set cookieSessionID to: "+e,{expires:t},s.DEBUG),i},i.setSessionUUID=function(){var e=i.getSessionUUID();return e||(e=o.v4()),n.set(l.sessionUUID,e),s.log("Set sessionUUID to: "+e,null,s.DEBUG),i},i.deleteSessionID=function(){return n.expire(l.sessionID),i},i.deleteAppUserID=function(){return n.expire(l.appUserID),i},i.setSessionID=function(e){return n.set(l.sessionID,e),s.log("Set sessionID to: "+e,null,s.DEBUG),i},i.setAppUserID=function(e){return n.set(l.appUserID,e),s.log("Set appUserID to: "+e,null,s.DEBUG),i},i.getSessionUUID=function(){return n.get(l.sessionUUID)},i.getCookieSessionID=function(){return n.get(l.cookieSessionID)},i.getAppUserID=function(){return n.get(l.appUserID)},i.getSessionID=function(){return n.get(l.sessionID)},i.getSessionAttributes=function(e){e=e||{};var t=c.toObject(),i=u();return e.sid=this.getSessionID(),e.ad=this.getSessionUUID(),e.adt="browser",e.ct="browser",e.lv=a.isProduction()?"0":"1",e.sdk=a.sdkVersion,e.rfr=i.referrer,e.exm=i.search.utm_medium,e.exs=i.search.utm_source,e.exc=i.search.utm_campaign,e.ext=i.search.utm_term,e.exct=i.search.utm_content,e.prms={search:i.search,location:t},navigator&&navigator.userAgent&&(e.prms.userAgent=navigator.userAgent),e},i.saveSessionConfig=function(e){i.config=e,e&&(i.hasLoadedData=!0,i.setAppUserID(e.app_user_id),i.setSessionID(e.session_id),i.tick());for(var t=0,t=0;t<i.sessionConfigPromises.length;t++){var r=i.sessionConfigPromises[t];r&&r()}i.sessionConfigPromises=[]},i.sessionConfigPromises=[],i.sessionConfigPromise=function(e){if(e)return i.hasLoadedData&&i.data?e():void i.sessionConfigPromises.push(e)},i.resetSession=function(){i.deleteSessionID(),i.deleteAppUserID(),i.data=null,i.hasLoadedData=!1}},{"../../config":27,"../lib/location":19,"../lib/source":24,"./cookies":18,"./logger":20,uuid:43}],24:[function(e,t,i){var r=e("qs");t.exports=function(){var e={},t=null;location&&location.search&&location.search.length&&(e=r.parse(location.search.substr(1))),document&&document.referrer&&(t=document.referrer);var i={referrer:t,search:e};return i}},{qs:32}],25:[function(e,t,i){t.exports=function(e,t,i,r){if(!e)return!1;if(!t||"string"!=typeof t)return!1;if(!i||"function"!=typeof i)return!1;if(!e[t])return!1;var n=e[t];return function(r){e[t]=function(){i.apply(r,arguments),n.apply(r,arguments)}}(r),!0}},{}],26:[function(e,t,i){function r(e,t,i){return this.init=!1,e?(this.name=e,this.defaultValue=t,this.value=t,this.updatedBlock=i,this.defaultType=this.getValueType(t),this.defaultType?(this.init=!0,void this.getValueFromConfig()):n.log("Error: Taplytics variables only support Strings, Numbers, and Booleans.",null,n.USER)):n.log("Error: Taplytics variable is missing a name",null,n.USER)}var n=e("../lib/logger"),o=e("../lib/session"),s=e("../api/variable");r.prototype.getValueType=function(e){return"string"==typeof e?"String":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"object"==typeof e?"JSON":null},r.prototype.stringifyValue=function(e){return"JSON"===this.defaultType?JSON.stringify(e):e},r.prototype.parseValue=function(e){if("JSON"===this.defaultType){if("object"==typeof e)return e;try{return JSON.parse(e)}catch(t){n.log("Error parsing JSON variable",e,n.LOG)}return nil}return e},r.prototype.getValueFromConfig=function(){var e=this;o.sessionConfigPromise(function(){var t=o.config;if(t){var i=t.dynamicVars?t.dynamicVars[e.name]:null;if(i){if(i.variableType!==e.defaultType)return n.error("Taplytics variable "+e.name+" default type does not match server: "+i.variableType,null,n.LOG);e.value=e.parseValue(i.value)}else n.log("New Taplytics Variable: "+e.name,null,n.DEBUG),s.post(e);e.updatedBlock&&e.updatedBlock(e.value)}})},t.exports=r},{"../api/variable":6,"../lib/logger":20,"../lib/session":23}],27:[function(e,t,i){i.obj=function(){var t=e("./app/app"),i={};return"production"===t.env?i.baseAPI="https://api.taplytics.com/public_api/v1/":"dev"===t.env||"development"===t.env?i.baseAPI="https://dev.taplytics.com/public_api/v1/":"stag"===t.env||"staging"===t.env?i.baseAPI="https://staging.taplytics.com/public_api/v1/":"local"===t.env&&(i.baseAPI="http://localhost:3002/public_api/v1/"),i.eventsFlushQueueTimeout=4e3,i.functionFlushQueueTimeout=500,i.sdkVersion="1.0.4",i},i.isProduction=function(){var t=e("./app/app");return"production"===t.env}},{"./app/app":7}],28:[function(e,t,i){var r=e("./app"),n=e("./lib/logger"),o=e("../config");i.Taplytics=window.Taplytics=t.exports=r,i.flushAppQueue=function(){if(n.log("flushAppQueue tick",window._tlq,n.LOUD),window._tlq&&window._tlq instanceof Array){var e=window._tlq.slice();if(window._tlq=[],Array.prototype.sort&&e.sort(function(e,t){if(e instanceof Array&&t instanceof Array){if("init"===e[0]&&"identify"===t[0])return-1;if("identify"===e[0]&&"init"===t[0])return 1;if("init"===e[0]||"identify"==e[0])return-1}return 2}),e.length>0){n.log("flushAppQueue: "+e.length,e,n.LOUD);for(var t=0;t<e.length;t++){var s=e[t],a=s.shift(),u=s;if(r[a]&&r[a]instanceof Function)try{r[a].apply(r,u)}catch(c){n.error("Attempted to call "+a+"("+(u||[]).join(",")+"); from the queue but failed!",c,n.USER),c&&c.stack&&n.error(c.stack,null,n.DEBUG)}}}}setTimeout(i.flushAppQueue,o.obj().functionFlushQueueTimeout)},i.flushAppQueue()},{"../config":27,"./app":7,"./lib/logger":20}],29:[function(e,t,i){function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,n=0;n<i.length;n++)if(r=i[n],r===t||r.fn===t){i.splice(n,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],30:[function(e,t,i){!function(){"use strict";function e(t,i,r,n){return this instanceof e?(this.domain=t||void 0,this.path=i||"/",this.secure=!!r,this.script=!!n,this):new e(t,i,r,n)}function t(e,i,r){return e instanceof t?e:this instanceof t?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(r||"/"),this.explicit_path=!1,this.domain=i||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,e&&this.parse(e,i,r),this):new t(e,i,r)}function r(){var e,i,n;return this instanceof r?(e=Object.create(null),this.setCookie=function(r,o,s){var a,u;if(r=new t(r,o,s),a=r.expiration_date<=Date.now(),void 0!==e[r.name]){for(i=e[r.name],u=0;u<i.length;u+=1)if(n=i[u],n.collidesWith(r))return a?(i.splice(u,1),0===i.length&&delete e[r.name],!1):(i[u]=r,r);return!a&&(i.push(r),r)}return!a&&(e[r.name]=[r],e[r.name])},this.getCookie=function(t,r){var n,o;if(i=e[t])for(o=0;o<i.length;o+=1)if(n=i[o],n.expiration_date<=Date.now())0===i.length&&delete e[n.name];else if(n.matches(r))return n},this.getCookies=function(t){var i,r,n=[];for(i in e)r=this.getCookie(i,t),r&&n.push(r);return n.toString=function(){return n.join(":")},n.toValueString=function(){return n.map(function(e){return e.toValueString()}).join(";")},n},this):new r}e.All=Object.freeze(Object.create(null)),i.CookieAccessInfo=e,i.Cookie=t,t.prototype.toString=function(){var e=[this.name+"="+this.value];return this.expiration_date!==1/0&&e.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&e.push("domain="+this.domain),this.path&&e.push("path="+this.path),this.secure&&e.push("secure"),this.noscript&&e.push("httponly"),e.join("; ")},t.prototype.toValueString=function(){return this.name+"="+this.value};var n=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;t.prototype.parse=function(e,i,r){if(this instanceof t){var n,o=e.split(";").filter(function(e){return!!e}),s=o[0].match(/([^=]+)=([\s\S]*)/),a=s[1],u=s[2];for(this.name=a,this.value=u,n=1;n<o.length;n+=1)switch(s=o[n].match(/([^=]+)(?:=([\s\S]*))?/),a=s[1].trim().toLowerCase(),u=s[2],a){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=u?Number(Date.parse(u)):1/0;break;case"path":this.path=u?u.trim():"",this.explicit_path=!0;break;case"domain":this.domain=u?u.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0}return this.explicit_path||(this.path=r||"/"),this.explicit_domain||(this.domain=i),this}return(new t).parse(e,i,r)},t.prototype.matches=function(t){return t===e.All||!(this.noscript&&t.script||this.secure&&!t.secure||!this.collidesWith(t))},t.prototype.collidesWith=function(e){if(this.path&&!e.path||this.domain&&!e.domain)return!1;if(this.path&&0!==e.path.indexOf(this.path))return!1;if(this.explicit_path&&0!==e.path.indexOf(this.path))return!1;var t=e.domain&&e.domain.replace(/^[\.]/,""),i=this.domain&&this.domain.replace(/^[\.]/,"");if(i===t)return!0;if(i){if(!this.explicit_domain)return!1;var r=t.indexOf(i);return r!==-1&&r===t.length-i.length}return!0},i.CookieJar=r,r.prototype.setCookies=function(e,i,r){e=Array.isArray(e)?e:e.split(n);var o,s,a=[];for(e=e.map(function(e){return new t(e,i,r)}),o=0;o<e.length;o+=1)s=e[o],this.setCookie(s,i,r)&&a.push(s);return a}}()},{}],31:[function(e,t,i){!function(e,i){"function"==typeof define&&define.amd?define([],i):"undefined"!=typeof t&&t.exports?t.exports=i():e.lscache=i()}(this,function(){function e(){var e="__lscachetest__",i=e;if(void 0!==h)return h;try{if(!localStorage)return!1}catch(r){return!1}try{a(e,i),u(e),h=!0}catch(n){h=!(!t(n)||!localStorage.length)}return h}function t(e){return!!(e&&"QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function i(){return void 0===d&&(d=null!=window.JSON),d}function r(e){return e.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")}function n(e){return e+v}function o(){return Math.floor((new Date).getTime()/m)}function s(e){return localStorage.getItem(g+_+e)}function a(e,t){localStorage.removeItem(g+_+e),localStorage.setItem(g+_+e,t)}function u(e){localStorage.removeItem(g+_+e)}function c(e){for(var t=new RegExp("^"+g+r(_)+"(.*)"),i=localStorage.length-1;i>=0;--i){var o=localStorage.key(i);o=o&&o.match(t),o=o&&o[1],o&&o.indexOf(v)<0&&e(o,n(o))}}function l(e){var t=n(e);u(e),u(t)}function p(e){var t=n(e),i=s(t);if(i){var r=parseInt(i,y);if(o()>=r)return u(e),u(t),!0}}function f(e,t){w&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+e),t&&window.console.warn("lscache - The error was: "+t.message))}var h,d,g="lscache-",v="-cacheexpiration",y=10,m=6e4,b=Math.floor(864e13/m),_="",w=!1,k={set:function(r,p,h){if(e()){if("string"!=typeof p){if(!i())return;try{p=JSON.stringify(p)}catch(d){return}}try{a(r,p)}catch(d){if(!t(d))return void f("Could not add item with key '"+r+"'",d);var g,v=[];c(function(e,t){var i=s(t);i=i?parseInt(i,y):b,v.push({key:e,size:(s(e)||"").length,expiration:i})}),v.sort(function(e,t){return t.expiration-e.expiration});for(var m=(p||"").length;v.length&&m>0;)g=v.pop(),f("Cache is full, removing item with key '"+r+"'"),l(g.key),m-=g.size;try{a(r,p)}catch(d){return void f("Could not add item with key '"+r+"', perhaps it's too big?",d)}}h?a(n(r),(o()+h).toString(y)):u(n(r))}},get:function(t){if(!e())return null;if(p(t))return null;var r=s(t);if(!r||!i())return r;try{return JSON.parse(r)}catch(n){return r}},remove:function(t){e()&&l(t)},supported:function(){return e()},flush:function(){e()&&c(function(e){l(e)})},flushExpired:function(){e()&&c(function(e){p(e)})},setBucket:function(e){_=e},resetBucket:function(){_=""},enableWarnings:function(e){w=e}};return k})},{}],32:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":33}],33:[function(e,t,i){var r=e("./stringify"),n=e("./parse");t.exports={stringify:r,parse:n}},{"./parse":34,"./stringify":35}],34:[function(e,t,i){var r=e("./utils"),n={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};n.parseValues=function(e,t){for(var i={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0,s=n.length;o<s;++o){var a=n[o],u=a.indexOf("]=")===-1?a.indexOf("="):a.indexOf("]=")+1;if(u===-1)i[r.decode(a)]="";else{var c=r.decode(a.slice(0,u)),l=r.decode(a.slice(u+1));Object.prototype.hasOwnProperty.call(i,c)?i[c]=[].concat(i[c]).concat(l):i[c]=l}}return i},n.parseObject=function(e,t,i){if(!e.length)return t;var r=e.shift(),o={};if("[]"===r)o=[],o=o.concat(n.parseObject(e,t,i));else{var s="["===r[0]&&"]"===r[r.length-1]?r.slice(1,r.length-1):r,a=parseInt(s,10),u=""+a;!isNaN(a)&&r!==s&&u===s&&a>=0&&a<=i.arrayLimit?(o=[],o[a]=n.parseObject(e,t,i)):o[s]=n.parseObject(e,t,i)}return o},n.parseKeys=function(e,t,i){if(e){var r=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,s=r.exec(e);if(!Object.prototype.hasOwnProperty(s[1])){var a=[];s[1]&&a.push(s[1]);for(var u=0;null!==(s=o.exec(e))&&u<i.depth;)++u,Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||a.push(s[1]);return s&&a.push("["+e.slice(s.index)+"]"),n.parseObject(a,t,i)}}},t.exports=function(e,t){if(""===e||null===e||"undefined"==typeof e)return{};t=t||{},t.delimiter="string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:n.delimiter,t.depth="number"==typeof t.depth?t.depth:n.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:n.arrayLimit,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:n.parameterLimit;for(var i="string"==typeof e?n.parseValues(e,t):e,o={},s=Object.keys(i),a=0,u=s.length;a<u;++a){var c=s[a],l=n.parseKeys(c,i[c],t);o=r.merge(o,l)}return r.compact(o)}},{"./utils":36}],35:[function(e,t,i){var r=e("./utils"),n={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}}};n.stringify=function(e,t,i){if(r.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(t)+"="+encodeURIComponent(e)];var o=[];if("undefined"==typeof e)return o;for(var s=Object.keys(e),a=0,u=s.length;a<u;++a){var c=s[a];o=Array.isArray(e)?o.concat(n.stringify(e[c],i(t,c),i)):o.concat(n.stringify(e[c],t+"["+c+"]",i))}return o},t.exports=function(e,t){t=t||{};var i="undefined"==typeof t.delimiter?n.delimiter:t.delimiter,r=[];if("object"!=typeof e||null===e)return"";var o;o=t.arrayFormat in n.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";
for(var s=n.arrayPrefixGenerators[o],a=Object.keys(e),u=0,c=a.length;u<c;++u){var l=a[u];r=r.concat(n.stringify(e[l],l,s))}return r.join(i)}},{"./utils":36}],36:[function(e,t,i){i.arrayToObject=function(e){for(var t={},i=0,r=e.length;i<r;++i)"undefined"!=typeof e[i]&&(t[i]=e[i]);return t},i.merge=function(e,t){if(!t)return e;if("object"!=typeof t)return Array.isArray(e)?e.push(t):e[t]=!0,e;if("object"!=typeof e)return e=[e].concat(t);Array.isArray(e)&&!Array.isArray(t)&&(e=i.arrayToObject(e));for(var r=Object.keys(t),n=0,o=r.length;n<o;++n){var s=r[n],a=t[s];e[s]?e[s]=i.merge(e[s],a):e[s]=a}return e},i.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},i.compact=function(e,t){if("object"!=typeof e||null===e)return e;t=t||[];var r=t.indexOf(e);if(r!==-1)return t[r];if(t.push(e),Array.isArray(e)){for(var n=[],o=0,s=e.length;o<s;++o)"undefined"!=typeof e[o]&&n.push(e[o]);return n}var a=Object.keys(e);for(o=0,s=a.length;o<s;++o){var u=a[o];e[u]=i.compact(e[u],t)}return e},i.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},i.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],37:[function(e,t,i){t.exports=function(e,t,i){for(var r=0,n=e.length,o=3==arguments.length?i:e[r++];r<n;)o=t.call(null,o,e[r],++r,e);return o}},{}],38:[function(e,t,i){function r(){}function n(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){if(!b(e))return e;var t=[];for(var i in e)null!=e[i]&&s(t,i,e[i]);return t.join("&")}function s(e,t,i){return Array.isArray(i)?i.forEach(function(i){s(e,t,i)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}function a(e){for(var t,i,r={},n=e.split("&"),o=0,s=n.length;o<s;++o)i=n[o],t=i.split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function u(e){var t,i,r,n,o=e.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;a<u;++a)i=o[a],t=i.indexOf(":"),r=i.slice(0,t).toLowerCase(),n=w(i.slice(t+1)),s[r]=n;return s}function c(e){return/[\/+]json\b/.test(e)}function l(e){return e.split(/ *; */).shift()}function p(e){return y(e.split(/ *; */),function(e,t){var i=t.split(/ *= */),r=i.shift(),n=i.shift();return r&&n&&(e[r]=n),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function h(e,t){var i=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(i)}catch(r){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=r,e.rawResponse=i.xhr&&i.xhr.responseText?i.xhr.responseText:null,e.statusCode=i.xhr&&i.xhr.status?i.xhr.status:null,i.callback(e)}if(i.emit("response",t),e)return i.callback(e,t);if(t.status>=200&&t.status<300)return i.callback(e,t);var n=new Error(t.statusText||"Unsuccessful HTTP response");n.original=e,n.response=t,n.status=t.status,i.callback(n,t)})}function d(e,t){var i=_("DELETE",e);return t&&i.end(t),i}var g,v=e("emitter"),y=e("reduce"),m=e("./request-base"),b=e("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var _=t.exports=e("./request").bind(null,h);_.getXHR=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var w="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};_.serializeObject=o,_.parseString=a,_.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},_.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},_.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var i=p(t);for(var r in i)this[r]=i[r]},f.prototype.parseBody=function(e){var t=_.parse[this.type];return!t&&c(this.type)&&(t=_.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},f.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,i=e.url,r="cannot "+t+" "+i+" ("+this.status+")",n=new Error(r);return n.status=this.status,n.method=t,n.url=i,n},_.Response=f,v(h.prototype);for(var k in m)h.prototype[k]=m[k];h.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},h.prototype.type=function(e){return this.set("Content-Type",_.types[e]||e),this},h.prototype.responseType=function(e){return this._responseType=e,this},h.prototype.accept=function(e){return this.set("Accept",_.types[e]||e),this},h.prototype.auth=function(e,t,i){switch(i||(i={type:"basic"}),i.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},h.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},h.prototype.attach=function(e,t,i){return this._getFormData().append(e,t,i||t.name),this},h.prototype._getFormData=function(){return this._formData||(this._formData=new g.FormData),this._formData},h.prototype.send=function(e){var t=b(e),i=this._header["content-type"];if(t&&b(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(i||this.type("form"),i=this._header["content-type"],"application/x-www-form-urlencoded"==i?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||n(e)?this:(i||this.type("json"),this)},f.prototype.parse=function(e){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(e),this},f.prototype.serialize=function(e){return this._parser=e,this},h.prototype.callback=function(e,t){var i=this._callback;this.clearTimeout(),i(e,t)},h.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},h.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},h.prototype.withCredentials=function(){return this._withCredentials=!0,this},h.prototype.end=function(e){var t=this,i=this.xhr=_.getXHR(),o=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=e||r,i.onreadystatechange=function(){if(4==i.readyState){var e;try{e=i.status}catch(r){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var u=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(i.onprogress=u);try{i.upload&&this.hasListeners("progress")&&(i.upload.onprogress=u)}catch(l){}if(s&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},s)),o&&(o=_.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?i.open(this.method,this.url,!0,this.username,this.password):i.open(this.method,this.url,!0),this._withCredentials&&(i.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!n(a)){var p=this._header["content-type"],f=this._parser||_.serialize[p?p.split(";")[0]:""];!f&&c(p)&&(f=_.serialize["application/json"]),f&&(a=f(a))}for(var h in this.header)null!=this.header[h]&&i.setRequestHeader(h,this.header[h]);return this._responseType&&(i.responseType=this._responseType),this.emit("request",this),i.send("undefined"!=typeof a?a:null),this},_.Request=h,_.get=function(e,t,i){var r=_("GET",e);return"function"==typeof t&&(i=t,t=null),t&&r.query(t),i&&r.end(i),r},_.head=function(e,t,i){var r=_("HEAD",e);return"function"==typeof t&&(i=t,t=null),t&&r.send(t),i&&r.end(i),r},_.del=d,_["delete"]=d,_.patch=function(e,t,i){var r=_("PATCH",e);return"function"==typeof t&&(i=t,t=null),t&&r.send(t),i&&r.end(i),r},_.post=function(e,t,i){var r=_("POST",e);return"function"==typeof t&&(i=t,t=null),t&&r.send(t),i&&r.end(i),r},_.put=function(e,t,i){var r=_("PUT",e);return"function"==typeof t&&(i=t,t=null),t&&r.send(t),i&&r.end(i),r}},{"./is-object":39,"./request":41,"./request-base":40,emitter:29,reduce:37}],39:[function(e,t,i){function r(e){return null!=e&&"object"==typeof e}t.exports=r},{}],40:[function(e,t,i){var r=e("./is-object");i.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},i.parse=function(e){return this._parser=e,this},i.timeout=function(e){return this._timeout=e,this},i.then=function(e,t){return this.end(function(i,r){i?t(i):e(r)})},i.use=function(e){return e(this),this},i.get=function(e){return this._header[e.toLowerCase()]},i.getHeader=i.get,i.set=function(e,t){if(r(e)){for(var i in e)this.set(i,e[i]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.field=function(e,t){return this._getFormData().append(e,t),this}},{"./is-object":39}],41:[function(e,t,i){function r(e,t,i){return"function"==typeof i?new e("GET",t).end(i):2==arguments.length?new e("GET",t):new e(t,i)}t.exports=r},{}],42:[function(e,t,i){(function(e){var i;if(e.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);i=function(){return crypto.getRandomValues(r),r}}if(!i){var n=new Array(16);i=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t,i){function r(e,t,i){var r=t&&i||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(t[r+n++]=c[e])});n<16;)t[r+n++]=0;return t}function n(e,t){var i=t||0,r=u;return r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]}function o(e,t,i){var r=t&&i||0,o=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:h,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:g+1,c=a-d+(u-g)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),(c<0||a>d)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,g=u,h=s,a+=122192928e5;var l=(1e4*(268435455&a)+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var p=a/4294967296*1e4&268435455;o[r++]=p>>>8&255,o[r++]=255&p,o[r++]=p>>>24&15|16,o[r++]=p>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var v=e.node||f,y=0;y<6;y++)o[r+y]=v[y];return t?t:n(o)}function s(e,t,i){var r=t&&i||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;s++)t[r+s]=o[s];return t||n(o)}for(var a=e("./rng"),u=[],c={},l=0;l<256;l++)u[l]=(l+256).toString(16).substr(1),c[u[l]]=l;var p=a(),f=[1|p[0],p[1],p[2],p[3],p[4],p[5]],h=16383&(p[6]<<8|p[7]),d=0,g=0,v=s;v.v1=o,v.v4=s,v.parse=r,v.unparse=n,t.exports=v},{"./rng":42}]},{},[28]);